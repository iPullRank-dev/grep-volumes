
  <!DOCTYPE html>
  <html>
    <head>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="//cdn.datatables.net/buttons/1.2.2/css/buttons.dataTables.min.css">
    <link rel="prerender" href="prerender-test.html">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>

      <!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
      <style>
      body {
        display: flex;
        min-height: 100vh;
        flex-direction: column;
      }

      main {
        flex: 1 0 auto;
      }

      </style>

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>GrepVolumes - Quick Search Volume Retrieval tool from iPullRank (UK Version)</title>
      <meta name="description" content="Tired of Google taking away your search data? Get your search volumes here!">
    </head>

    <body>
      <header>
        <nav class="blue darken-2">
          <div class="container">
           <div class="nav-wrapper">
             <a href="#!" class="brand-logo"><i class="material-icons">library_books</i>GrepVolumes</a>
             <ul class="right hide-on-med-and-down">
               <li><a href="."><i class="material-icons">refresh</i></a></li>
             </ul>
           </div>
         </div>
         </nav>
      </header>

      <main>
          <div class="container">
            <div class="col s12">&nbsp;</div>
            <div class="col s12">&nbsp;</div>
            <div class="col s12">&nbsp;</div>
          <div class="row">
              <form class="col s12">
                <div class="row">
                  <div class="input-field col s6">
                    <i class="material-icons prefix">mode_edit</i>
                    <textarea id="keywords" class="materialize-textarea"></textarea>
                    <label for="keywords">Enter Keywords (line-separated)</label>
                  </div>
                  <div class="col s6"><br/>
                    <br />
                    <button id="getSvButton" class="btn waves-effect waves-light red darken-3" type="submit" name="action">Get Search Volume
                <i class="material-icons right">send</i>
              </button>
                  </div>
                </div>

              </form>
            </div>
    <h4>Keyword Data</h4>
    <table id="kwData">
       <thead>
         <tr>
             <th data-field="id">Keyword</th>
             <th data-field="name">Local Monthly Search Volume</th>
             <th data-field="price">Cost Per Click</th>
             <th data-field="price">Month 1</th>
             <th data-field="price">Month 2</th>
             <th data-field="price">Month 3</th>
             <th data-field="price">Month 4</th>
             <th data-field="price">Month 5</th>
             <th data-field="price">Month 6</th>
             <th data-field="price">Month 7</th>
             <th data-field="price">Month 8</th>
             <th data-field="price">Month 9</th>
             <th data-field="price">Month 10</th>
             <th data-field="price">Month 11</th>
             <th data-field="price">Month 12</th>
         </tr>
       </thead>

       <tbody>
       </tbody>
     </table>
     </div>
  <div class="col s12">&nbsp;</div>
  <div class="col s12">&nbsp;</div>
  <div class="col s12">&nbsp;</div>
   </main>
   <footer class="page-footer blue darken-2">
       <div class="container">
         <div class="row">
           <div class="col l6 s12">
             <h5 class="white-text">Grep Volumes</h5>
             <p class="grey-text text-lighten-4">A simple tool to pull search volumes from the GrepWords API. Brought to you by the good folks at iPullRank.</p>
           </div>
           <div class="col l4 offset-l2 s12">
             <h5 class="white-text">Links</h5>
             <ul>
               <li><a class="grey-text text-lighten-3" href="http://ipullrank.com">iPullRank</a></li>
               <li><a class="grey-text text-lighten-3" href="http://ipullrank.com/blog">iPullRank Blog</a></li>
               <li><a class="grey-text text-lighten-3" href="http://twitter.com/ipullrank">iPullRank Twitter</a></li>
             </ul>
           </div>
         </div>
       </div>
       <div class="footer-copyright">
         <div class="container">
         GPL v2 license or something.

         </div>
       </div>
     </footer>

      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
      <script type="text/javascript" src="js/materialize.min.js"></script>
      <script type="text/javascript" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
      <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
      <script type="text/javascript" src="//cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
      <script type="text/javascript" src="//cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
      <script type="text/javascript" src="//cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js"></script>
      <!-- <script type="text/javascript" src="//cdn.datatables.net/1.10.12/js/dataTables.scrollingPagination.js"></script> -->


      <script>

              $('#keywords').trigger('autoresize');
              $('#kwData').DataTable({select:true,dom: 'Bfrtip',
        buttons: ['copyHtml5',
          {
            extend: 'excelHtml5',
            title: 'GrepVolume Export'
          },
          {
            extend: 'csvHtml5',
            title: 'GrepVolume Export'
          },
          {
            extend:'pdfHtml5',
            title: 'GrepVolume Export'
          }
        ]});

              $('#getSvButton').click(function(e){
                  e.preventDefault();
                  console.log($('#keywords').val());
                  $.ajax
                  ({
                      url: 'sv-ajax-uk.php',
                      data: {"keywords": $('#keywords').val()},
                      type: 'post',
                      dataType:'json',
                      success: function(result)
                      {
                          $('#keywords').val('');
                          $('#keywords').trigger('autoresize');
                          console.log(result);
                          console.log(result.keywords);
                          console.log(typeof(result.keywords.length));
                          var t = $('#kwData').DataTable();
                          console.log(t);
                          if(typeof(result.keywords.length)!='undefined')
                          {
                            for (i=0;i<result.keywords.length;i++)
                            {
                              //$('#kwData tr:last').after('<tr><td>'+result.keywords[i].keyword+'</td><td>'+result.keywords[i].searchvolume+'</td><td>'+result.keywords[i].cpc+'</td></tr>');
                              t.row.add([result.keywords[i].keyword,result.keywords[i].searchvolume,result.keywords[i].cpc,result.keywords[i].m1,
                                result.keywords[i].m2,result.keywords[i].m3,result.keywords[i].m4,result.keywords[i].m5,result.keywords[i].m6,
                                result.keywords[i].m7,result.keywords[i].m8,result.keywords[i].m9,result.keywords[i].m10,result.keywords[i].m11,
                                result.keywords[i].m12]).draw(false);
                            }
                          }
                          else{
                              $('#kwData tr:last').after('<tr><td>'+result.keywords.keyword+'</td><td>'+result.keywords.searchvolume+'</td><td>'+result.keywords.cpc+'</td></tr>');
                          }
                      }
                  });
              });

      </script>
    </body>
  </html>
